<!DOCTYPE html>
<html>

<head>
    <title></title>
    <script src="http://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script>
        var paintpoints = new Array();
        var pointX = new Array();
        var pointY = new Array();
        var paintpoints_content = new Array();
        var canvas;
        var context;
        var paint = false;
        window.onload = function() {
            canvas = document.getElementById("pCanvas");
            context = canvas.getContext("2d");
        };

        function mousedownandler(e) {
            var x = e.clientX;
            var y = e.clientY;
            context.beginPath();
            context.lineWidth = 3;
            context.strokeStyle = 'black';
            context.moveTo(x, y);
            paint = true;
        }

        function mousemoveandler(e) {
            if (paint) {
                var x = e.clientX;
                var y = e.clientY;
                context.lineTo(x, y);
                context.stroke();
                pointX.push(x);
                pointY.push(y);
            }
        }

        function mouseupHandler(e) {
            paint = false;
        }

        function clearCanvas() {
            context.clearRect(0, 0, canvas.width, canvas.height);
        }

        function submit() {
            var JSONpointX = JSON.stringify(pointX);
            var JSONpointY = JSON.stringify(pointY);
            $("#pointX").val(JSONpointX);
            $("#pointY").val(JSONpointY);
            $("#pointSend").submit();
        }
    </script>
</head>

<body>
    <canvas id="pCanvas" width=560; height=360; onmousedown="mousedownandler(event)" onmousemove="mousemoveandler(event)" onmouseup="mouseupHandler(event)" style="cursor:pointer;background-image: url('/BA102G2/Front_end/res/img/ring_64.png');">
</canvas>
    <button onclick="clearCanvas()" style="width:200px;">清空</button>
    <form id="pointSend" action="/BA102G2/product/ProductServlet">
        <input type="hidden" id="point" name="point" value="">
        <input type="hidden" id="pointX" name="pointX" value="">
        <input type="hidden" id="pointY" name="pointY" value="">
        <input type="hidden" id="pointY" name="action" value="TEST">
    </form>
    <button onclick="submit()" style="width:200px;">送出</button>
</body>

</html>